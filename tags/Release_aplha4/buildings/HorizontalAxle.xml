<?xml version="1.0" ?>



<building name="Horizontal Axle" gameID="horizontal_axle" file="mechanics.png">

	<include file="sBlueprint.xml" />

	<!-- can be sure we have it right if the building is long -->
	<else>
		<or>
			<NeighbourSameBuilding dir="West"/>
			<NeighbourSameBuilding dir="East"/>
		</or>
		<if>
			<or>
				<AnimationFrame value=0 />
				<AnimationFrame value=2 />
				<AnimationFrame value=4 />
			</or>
			<sprite index = 6 />
		</if>
		<else>
			<sprite index = 7 />
		</else>
	</else>
	<else>
		<or>
			<NeighbourSameBuilding dir="North"/>
			<NeighbourSameBuilding dir="South"/>
		</or>
		<if>
			<or>
				<AnimationFrame value=0 />
				<AnimationFrame value=2 />
				<AnimationFrame value=4 />
			</or>
			<sprite index = 4 />
		</if>
		<else>
			<sprite index = 5 />
		</else>
	</else>
	<!-- look for gears preferentially -->
	<else>
		<or>
			<NeighbourOfType dir="East" value="gear_assembly"/>
			<NeighbourOfType dir="West" value="gear_assembly"/>
		</or>
		<if>
			<or>
				<AnimationFrame value=0 />
				<AnimationFrame value=2 />
				<AnimationFrame value=4 />
			</or>
			<sprite index = 6 />
		</if>
		<else>
			<sprite index = 7 />
		</else>
	</else>
	<else>
		<or>
			<NeighbourOfType dir="North" value="gear_assembly"/>
			<NeighbourOfType dir="South" value="gear_assembly"/>
		</or>
		<if>
			<or>
				<AnimationFrame value=0 />
				<AnimationFrame value=2 />
				<AnimationFrame value=4 />
			</or>
			<sprite index = 4 />
		</if>
		<else>
			<sprite index = 5 />
		</else>
	</else>
	<!-- any other hints -->
	<else>
		<or>
			<NeighbourOfType dir="East" value="water_wheel"/>
			<NeighbourOfType dir="West" value="water_wheel"/>
			<NeighbourOfType dir="East" value="screw_pump"/>
			<NeighbourOfType dir="West" value="screw_pump"/>
			<NeighbourOfType dir="East" value="millstone"/>
			<NeighbourOfType dir="West" value="millstone"/>
			<NeighbourOfType dir="East" value="horizontal_axle"/>
			<NeighbourOfType dir="West" value="horizontal_axle"/>
		</or>
		<if>
			<or>
				<AnimationFrame value=0 />
				<AnimationFrame value=2 />
				<AnimationFrame value=4 />
			</or>
			<sprite index = 6 />
		</if>
		<else>
			<sprite index = 7 />
		</else>
	</else>	
	<else>
		<if>
			<or>
				<AnimationFrame value=0 />
				<AnimationFrame value=2 />
				<AnimationFrame value=4 />
			</or>
			<sprite index = 5 />
		</if>
		<else>
			<sprite index = 4 />
		</else>
	</else>
		
</building> 
